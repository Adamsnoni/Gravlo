@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  *, *::before, *::after { box-sizing: border-box; }

  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    background-color: #F5F0E8;
    color: #1A1612;
    font-family: 'DM Sans', system-ui, sans-serif;
    min-height: 100vh;
    min-height: 100dvh;
    overflow-x: hidden;
  }

  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: #EDE5D4; }
  ::-webkit-scrollbar-thumb { background: #C4B89A; border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: #A89272; }

  ::selection { background: rgba(74,124,89,0.2); color: #1A1612; }
}

@layer components {
  .font-display { font-family: 'Playfair Display', Georgia, serif; }
  .font-body    { font-family: 'DM Sans', system-ui, sans-serif; }
  .font-mono    { font-family: 'JetBrains Mono', monospace; }

  /* Grain texture overlay */
  .grain::after {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 9999;
    opacity: 0.025;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    background-repeat: repeat;
    background-size: 128px 128px;
  }

  /* Input base */
  .input-base {
    @apply w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 text-ink font-body text-sm
           focus:outline-none focus:border-sage focus:ring-2 focus:ring-sage/20
           placeholder:text-stone-400 transition-all duration-200;
  }

  /* Button variants */
  .btn-primary {
    @apply inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl
           bg-sage text-cream font-body font-semibold text-sm
           active:scale-[0.98] transition-all duration-150 shadow-sm
           disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl
           bg-cream border border-stone-200 text-ink font-body font-medium text-sm
           hover:bg-stone-100 active:scale-[0.98] transition-all duration-150;
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg
           text-stone-500 font-body font-medium text-sm
           hover:bg-stone-100 hover:text-ink active:scale-[0.98] transition-all duration-150;
  }

  .btn-danger {
    @apply inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl
           text-white font-body font-semibold text-sm
           active:scale-[0.98] transition-all duration-150;
    background-color: #B84C3A;
  }

  /* Card */
  .card {
    @apply bg-white rounded-2xl border border-stone-100 shadow-card;
  }

  .card-hover {
    @apply card hover:border-stone-200 hover:shadow-deep transition-all duration-200 cursor-pointer;
  }

  /* Badge */
  .badge {
    @apply inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold font-body tracking-wide;
  }

  .badge-sage  { @apply badge bg-sage/10 text-sage; }
  .badge-amber { @apply badge bg-amber/10 text-amber; }
  .badge-rust  { @apply badge bg-rust/10 text-rust; }
  .badge-stone { @apply badge bg-stone-100 text-stone-500; }

  /* Sidebar nav item */
  .nav-item {
    @apply flex items-center gap-3 px-3 py-2.5 rounded-xl text-stone-500 font-body font-medium text-sm
           hover:bg-stone-100 hover:text-ink transition-all duration-150 cursor-pointer;
  }

  .nav-item.active {
    @apply bg-sage/10 text-sage font-semibold;
  }

  /* Stat card */
  .stat-card {
    @apply card p-6 flex flex-col gap-3;
  }

  /* Table row */
  .table-row {
    @apply flex items-center gap-4 px-5 py-4 border-b border-stone-100 last:border-0
           hover:bg-stone-50/70 transition-colors duration-100;
  }

  /* Label utility */
  .label-xs {
    @apply block font-body text-xs font-semibold text-stone-500 uppercase tracking-wider mb-1.5;
  }

  /* Stagger animation delays */
  .stagger-1 { animation-delay: 0.05s; }
  .stagger-2 { animation-delay: 0.10s; }
  .stagger-3 { animation-delay: 0.15s; }
  .stagger-4 { animation-delay: 0.20s; }
  .stagger-5 { animation-delay: 0.25s; }

  /* Dynamic viewport height for mobile â€” avoids bounce from browser chrome */
  .min-h-dvh {
    min-height: 100vh;
    min-height: 100dvh;
  }
}

/* Button hover states (outside @apply to avoid Tailwind @apply restrictions) */
.btn-primary:hover {
  background-color: #5E9B6E;
  box-shadow: 0 4px 16px rgba(74, 124, 89, 0.28);
}

.btn-danger:hover {
  background-color: #a3432f;
}

/* Custom range input */
input[type='range'] {
  -webkit-appearance: none;
  height: 4px;
  border-radius: 2px;
  background: #DDD4C4;
  outline: none;
}

input[type='range']::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #4A7C59;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(74, 124, 89, 0.4);
}

/* Focus rings */
*:focus-visible { outline: 2px solid #4A7C59; outline-offset: 2px; }
